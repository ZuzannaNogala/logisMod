---
title: "A guide to projektROR"
output: rmarkdown::html_vignette
author: Hankus Oktawia, Nogala Zuzanna
vignette: >
  %\VignetteIndexEntry{A guide to projektROR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# About 

The projektROR is a R package with useful tools to analyze data using logistic model. 

Our package provides a method to build logistic regression based on user's data, which are $\textit{data.table}$ object. There are few methods to help user visualize data sets. The package cointent a boxplot method to show relationship between regresors and dependent variable. In addition user can see Correlation Heatmap. Fethermore user can compare models with implemented method of ROC curve with AUC or plot with fitted logit curve to data. Also package allows to compare regression with informative criterias like AIC, BIC and also by K-Fold Cross Validation. In addition, there is a method to computed all responese predictions for created model. 

In our package there are two datasets $\textit{citrus}$ and $\textit{creditData}$, which are $\textit{data.table}$ objects. Based of them, we will show the funtions in projektROR package.

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(projektROR)
```

## 1. Visualize dataset

In this guide we will work with $\textit{citrus}$ dataset. This dataset contains 10000 observations. In variable $\textit{nameBin}$ there is a information if the fruit is an orange (0) or a grapefruit (1) based on features like diameter, weight and the RGB values of color. 

```{r, echo = TRUE}
str(citrus)
```

Firstly, let's create boxplots with using $\textit{visual_boxplot}$ method. That's can help us to see relationship beetween features and $\textit{nameBin}$ variable, which we want to model.

```{r, echo = TRUE}
visual_boxplot(data = citrus, str_name_Y = "nameBin", str_name_X = "diameter", plot_title= " ")
```

```{r, echo=FALSE,}
visual_boxplot(data = citrus, str_name_Y = "nameBin", str_name_X = "weight", plot_title= " ")
visual_boxplot(data = citrus, str_name_Y = "nameBin", str_name_X = "red", plot_title= " ")
visual_boxplot(data = citrus, str_name_Y = "nameBin", str_name_X = "green", plot_title= " ")
visual_boxplot(data = citrus, str_name_Y = "nameBin", str_name_X = "blue", plot_title= " ")
```

Take a look on correlation Heatmap

```{r, echo=FALSE}
vars <- c("diameter", "weight", "red", "green", "blue", "nameBin")
#corrHeatmap(citrus, vars)
```

## 2. Build a model

Firstly we want to build model with all of the variables.

```{r, echo=T, results='hide', warning=FALSE}
allVarModel <- logisMod(nameBin ~ ., citrus)
```

If we want to see the results we use base function `summary` or just print the model.

```{r}
summary(allVarModel)
```

It shows us that all of the variables are null, so we should consider different predictors. Lets see what we get for just "diameter" and "weight".

```{r, warning=FALSE}
dwModel <- logisMod(nameBin ~ diameter + weight, citrus)
summary(dwModel)
```

## 3. Plot response

Above examples show that this data set may not be perfect for logistic regression, but we may try to use another function. Lets plot predicted probabilities for one-variable model (we include intercept).

```{r, fig.height=4, fig.width=7}
oneVarModel <- logisMod(nameBin ~ red, citrus) 
resPlot(oneVarModel)
```

We don't have to create model to plot prediction. This function also works with data.table (or data.frame) and names of variables.

```{r, fig.height=4, fig.width=7}
resPlot(citrus, "nameBin", "diameter")
```

## 4. Correlation heatmap

We can create also correlation heatmap. It is just correlation matix but portrayed as heatmap.

```{r, fig.height=4, fig.width=7}
corrHeatmap(citrus, c("diameter", "weight", "red"))
```

## 5. AIC/BIC

One of the most important features of this package is possibility to compare all possible models for given vector of variables. It works with character vector of names of variables.

```{r, warning=FALSE}
possiblePred <- colnames(citrus)[2:6]
countInfCrit(citrus, "nameBin", possiblePred)
```
